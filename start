inquire(){
  run=true
  while [ $run = true ]; do
    echo -n "$1 [p/d] "
    read answer
    answer=$(echo $answer | tr '[:upper:'] '[:lower:]')

    case $answer in
      "p" | "production")
        return 1;;
      "d" | "development")
        return 0;;
      *);;
    esac
  done
}

echo "How would you like to start the server?"
echo "PRODUCTION mode will do the following:"
echo "1) Keep the server alive even after closing this window"
echo "2) Won't reload changes; you'll have to restart the server yourself"
echo "DEVELOPMENT mode will do the following:"
echo "1) Stop the server once this window is closed"
echo "2) Automatically reload file changes"

inquire "PRODUCTION or DEVELOPMENT"
choice=$?

if [[ $choice == 1 ]]; then
  # PRODUCTION
  nohup node server.js &
  echo "Now running in production mode"
  echo "Stop the application by executing this command:"
  echo ". stop"
else
  # DEVELOPMENT
  nodemon server.js
  echo "Now running in development mode"
  echo "press Ctrl+C to stop the server"
fi

#########
# NGINX #
#########

# sudo yum -y install nginx            # Install NGINX
# sudo chmod 777 /etc/nginx/nginx.conf # Give user permission to access nginx.conf
# sudo nano /etc/nginx/nginx.conf      # Modify nginx.conf (example below)
# sudo nginx                           # Start up NGINX

####################
# NGINX Management #
####################
# sudo nginx -s reload                                       # Do this command whenever you edit /etc/nginx/nginx.conf
# sudo systemctl restart nginx                               # This restarts nginx
# sudo top -c -p $(pgrep nginx | tr '\n' ',' | sed 's/.$//') # Force stop nginx
